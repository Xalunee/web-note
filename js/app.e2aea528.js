(function(){"use strict";var e={368:function(e,o,t){var n=t(9242),l=t(3396),a=t(7139);const s={key:0,class:"text-center pt-2 100vh 100vw"},r={class:"container mt-5"},i={class:"row row-cols-2"},c={class:"left-side col-3"},d=(0,l._)("h4",null,"Папки",-1),m={class:"right-side col-9 text-center ps-5"},u=(0,l._)("h4",null,"Заметки",-1),p={class:"notes"},f={key:1,class:"container d-flex justify-content-center align-items-center vh-100 vw-100"},h={class:"step"},b={class:"mb-3"},g=(0,l._)("label",{for:"name",class:"form-label"},"Имя",-1),v={class:"mb-3"},w=(0,l._)("label",{for:"password",class:"form-label"},"Пароль",-1),_=(0,l._)("button",{type:"submit",class:"btn btn-primary mb-1"},"Войти",-1),k={class:"step"},y={class:"mb-3"},N=(0,l._)("label",{for:"name",class:"form-label"},"Имя",-1),V={class:"mb-3"},F=(0,l._)("label",{for:"email",class:"form-label"},"Почта",-1),S={class:"mb-3"},$=(0,l._)("label",{for:"password",class:"form-label"},"Пароль",-1),P={class:"mb-3"},O=(0,l._)("label",{for:"confirmPassword",class:"form-label"},"Повторить пароль",-1),E=(0,l._)("button",{type:"submit",class:"btn btn-primary mb-1"}," Зарегистрироваться ",-1);function C(e,o,t,C,x,z){const U=(0,l.up)("folder-form"),A=(0,l.up)("my-dialog"),D=(0,l.up)("folder-form-edit"),T=(0,l.up)("folder-list"),W=(0,l.up)("note-form-create"),M=(0,l.up)("note-form-edit"),I=(0,l.up)("NoteFormMove"),R=(0,l.up)("notes-list");return 0===x.step?((0,l.wg)(),(0,l.iD)("div",s,[(0,l._)("h5",null,"Имя: "+(0,a.zw)(x.userInfo.userName),1),(0,l._)("h5",null,"Почта: "+(0,a.zw)(x.userInfo.userEmail),1),(0,l._)("div",r,[(0,l._)("div",i,[(0,l._)("div",c,[d,(0,l._)("button",{onClick:o[0]||(o[0]=(...e)=>z.showDialog&&z.showDialog(...e)),class:"btn btn-outline-success btn-lg"}," Создать "),(0,l.Wm)(A,{show:x.dialogVisible,"onUpdate:show":o[1]||(o[1]=e=>x.dialogVisible=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(U,{onCreate:z.createFolder},null,8,["onCreate"])])),_:1},8,["show"]),(0,l.Wm)(A,{show:x.dialogEditVisible,"onUpdate:show":o[2]||(o[2]=e=>x.dialogEditVisible=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(D,{onEdit:z.editFolderForm},null,8,["onEdit"])])),_:1},8,["show"]),(0,l.Wm)(T,{folders:x.folders,onRemove:z.removeFolder,onEdit:z.editFolder,onShowNotes:z.showNotes},null,8,["folders","onRemove","onEdit","onShowNotes"])]),(0,l._)("div",m,[u,x.selectedFolderId.length>0?((0,l.wg)(),(0,l.iD)("button",{key:0,onClick:o[3]||(o[3]=(...e)=>z.showNoteDialog&&z.showNoteDialog(...e)),class:"btn btn-outline-success btn-lg"}," Создать ")):(0,l.kq)("",!0),(0,l.Wm)(A,{show:x.dialogNoteVisible,"onUpdate:show":o[4]||(o[4]=e=>x.dialogNoteVisible=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(W,{onCreate:z.createNote},null,8,["onCreate"])])),_:1},8,["show"]),(0,l.Wm)(A,{show:x.dialogEditNoteVisible,"onUpdate:show":o[5]||(o[5]=e=>x.dialogEditNoteVisible=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(M,{onEdit:z.editNoteForm},null,8,["onEdit"])])),_:1},8,["show"]),(0,l.Wm)(A,{show:x.dialogMoveNoteVisible,"onUpdate:show":o[6]||(o[6]=e=>x.dialogMoveNoteVisible=e)},{default:(0,l.w5)((()=>[(0,l.Wm)(I,{onMove:z.moveNoteForm,options:x.folderOptions},null,8,["onMove","options"])])),_:1},8,["show"]),(0,l._)("div",p,[(0,l.Wm)(R,{notes:x.notes,onEdit:z.editNote,onRemove:z.removeNote,onMove:z.moveNote,class:"d-flex flex-wrap"},null,8,["notes","onEdit","onRemove","onMove"])])])])])])):((0,l.wg)(),(0,l.iD)("div",f,[(0,l.wy)((0,l._)("form",{onSubmit:o[10]||(o[10]=(0,n.iM)(((...e)=>z.autorizationUser&&z.autorizationUser(...e)),["prevent"])),novalidate:"",class:"border p-5 rounded"},[(0,l._)("div",h,[(0,l._)("div",b,[g,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":o[7]||(o[7]=e=>C.state.formAutoriz.name=e),type:"text",class:"form-control",id:"name"},null,512),[[n.nr,C.state.formAutoriz.name]])]),(0,l._)("div",v,[w,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":o[8]||(o[8]=e=>C.state.formAutoriz.password=e),type:"password",class:"form-control",id:"password"},null,512),[[n.nr,C.state.formAutoriz.password]])]),_,(0,l._)("p",null,[(0,l.Uk)(" Нет аккаунта? "),(0,l._)("span",{onClick:o[9]||(o[9]=(...e)=>z.register&&z.register(...e)),role:"button",class:"text-primary"},"Зарегистрироваться")])])],544),[[n.F8,1===x.step]]),(0,l.wy)((0,l._)("form",{onSubmit:o[16]||(o[16]=(0,n.iM)(((...e)=>z.registrationUser&&z.registrationUser(...e)),["prevent"])),novalidate:"",class:"border p-5 rounded"},[(0,l._)("div",k,[(0,l._)("div",y,[N,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":o[11]||(o[11]=e=>C.state.formReg.name=e),type:"text",class:"form-control",id:"name"},null,512),[[n.nr,C.state.formReg.name]])]),(0,l._)("div",V,[F,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":o[12]||(o[12]=e=>C.state.formReg.email=e),type:"email",class:"form-control",id:"email"},null,512),[[n.nr,C.state.formReg.email]])]),(0,l._)("div",S,[$,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":o[13]||(o[13]=e=>C.state.formReg.password=e),type:"password",class:"form-control",id:"password"},null,512),[[n.nr,C.state.formReg.password]])]),(0,l._)("div",P,[O,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":o[14]||(o[14]=e=>C.state.formReg.confirmPassword=e),type:"password",class:"form-control",id:"confirmPassword"},null,512),[[n.nr,C.state.formReg.confirmPassword]])]),E,(0,l._)("p",null,[(0,l.Uk)(" У меня уже есть аккаунт. "),(0,l._)("span",{onClick:o[15]||(o[15]=(...e)=>z.autorization&&z.autorization(...e)),role:"button",class:"text-primary"},"Войти")])])],544),[[n.F8,2===x.step]])]))}t(7658);const x=(0,l._)("h5",null,[(0,l._)("strong",null,"Создание папки")],-1),z=(0,l._)("label",{for:"name",class:"form-label"},"Название",-1),U=(0,l._)("label",{for:"color",class:"form-label"},"Цвет",-1);function A(e,o,t,a,s,r){const i=(0,l.up)("my-select");return(0,l.wg)(),(0,l.iD)("form",{onSubmit:o[3]||(o[3]=(0,n.iM)((()=>{}),["prevent"])),class:"text-start rounded p-2"},[x,z,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.folder.name=e),type:"text",class:"form-control mb-3",id:"name"},null,512),[[n.nr,s.folder.name]]),U,(0,l.Wm)(i,{class:"form-control mb-3",id:"color",modelValue:s.folder.color,"onUpdate:modelValue":o[1]||(o[1]=e=>s.folder.color=e),options:s.colorOptions},null,8,["modelValue","options"]),(0,l._)("button",{onClick:o[2]||(o[2]=(...e)=>r.createFolder&&r.createFolder(...e)),type:"submit",class:"btn btn-outline-dark"}," Создать ")],32)}const D=["value"],T=["value"];function W(e,o,t,n,s,r){return(0,l.wg)(),(0,l.iD)("select",{value:t.modelValue,onChange:o[0]||(o[0]=(...e)=>r.changeOption&&r.changeOption(...e))},[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.options,(e=>((0,l.wg)(),(0,l.iD)("option",{key:e.value,value:e.value},(0,a.zw)(e.name),9,T)))),128))],40,D)}var M={name:"my-select",props:{modelValue:{type:String},options:{type:Array,default:()=>[]}},methods:{changeOption(e){this.$emit("update:modelValue",e.target.value)}}},I=t(89);const R=(0,I.Z)(M,[["render",W]]);var Z=R,L={data(){return{folder:{name:"",color:"White"},colorOptions:[{value:"White",name:"White"},{value:"Blue",name:"Blue"},{value:"Orange",name:"Orange"},{value:"Yellow",name:"Yellow"},{value:"Purple",name:"Purple"},{value:"Pink",name:"Pink"},{value:"Green",name:"Green"},{value:"Lime",name:"Lime"},{value:"LightGray",name:"LightGray"}]}},methods:{createFolder(){this.$emit("create",this.folder),this.folder={name:""}}},components:{MySelect:Z}};const B=(0,I.Z)(L,[["render",A]]);var j=B;function G(e,o,t,n,a,s){const r=(0,l.up)("folder-item");return(0,l.wg)(),(0,l.iD)("div",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.folders,(o=>((0,l.wg)(),(0,l.j4)(r,{folder:o,key:o.id,onRemove:t=>e.$emit("remove",o),onEdit:t=>e.$emit("edit",o),onShowNotes:t=>e.$emit("showNotes",o)},null,8,["folder","onRemove","onEdit","onShowNotes"])))),128))])}const q={class:"mb-0"},Y={class:"folder__btns d-flex justify-content-between"};function H(e,o,t,n,s,r){return(0,l.wg)(),(0,l.iD)("div",{class:"folder border rounded p-3 mt-2",style:(0,a.j5)({"background-color":t.folder.color})},[(0,l._)("div",null,[(0,l._)("h5",q,[(0,l._)("strong",null,(0,a.zw)(t.folder.name),1)]),(0,l._)("p",null,"Заметки: "+(0,a.zw)(t.folder.notesCount),1)]),(0,l._)("div",Y,[(0,l._)("button",{class:"btn btn-dark btn-sm",onClick:o[0]||(o[0]=o=>e.$emit("edit",t.folder))}," Изменить "),(0,l._)("button",{class:"btn btn-danger btn-sm",onClick:o[1]||(o[1]=o=>e.$emit("remove",t.folder))}," Удалить "),(0,l._)("button",{class:"btn btn-info btn-sm",onClick:o[2]||(o[2]=o=>e.$emit("showNotes",t.folder))}," Выбрать папку ")])],4)}var K={props:{folder:{type:Object,required:!0}}};const X=(0,I.Z)(K,[["render",H]]);var J=X,Q={props:{folders:{type:Array,required:!0}},components:{FolderItem:J}};const ee=(0,I.Z)(Q,[["render",G]]);var oe=ee,te=t(3053),ne=t(9117),le=t(4870),ae=t(70);const se=(0,l._)("h5",null,[(0,l._)("strong",null,"Изменение папки")],-1),re=(0,l._)("label",{for:"name",class:"form-label"},"Название",-1),ie=(0,l._)("label",{for:"color",class:"form-label"},"Цвет",-1);function ce(e,o,t,a,s,r){const i=(0,l.up)("my-select");return(0,l.wg)(),(0,l.iD)("form",{onSubmit:o[3]||(o[3]=(0,n.iM)((()=>{}),["prevent"])),class:"text-start rounded p-2"},[se,re,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.folder.name=e),type:"text",class:"form-control mb-3",id:"name"},null,512),[[n.nr,s.folder.name]]),ie,(0,l.Wm)(i,{class:"form-control mb-3",id:"color",modelValue:s.folder.color,"onUpdate:modelValue":o[1]||(o[1]=e=>s.folder.color=e),options:s.colorOptions},null,8,["modelValue","options"]),(0,l._)("button",{class:"btn btn-dark",onClick:o[2]||(o[2]=(...e)=>r.editFolder&&r.editFolder(...e))},"Изменить")],32)}var de={data(){return{folder:{name:"",color:"White"},colorOptions:[{value:"White",name:"White"},{value:"Blue",name:"Blue"},{value:"Orange",name:"Orange"},{value:"Yellow",name:"Yellow"},{value:"Purple",name:"Purple"},{value:"Pink",name:"Pink"},{value:"Green",name:"Green"},{value:"Lime",name:"Lime"},{value:"LightGray",name:"LightGray"}]}},methods:{editFolder(){this.$emit("edit",this.folder),this.folder={name:""}}},components:{MySelect:Z}};const me=(0,I.Z)(de,[["render",ce]]);var ue=me;function pe(e,o,t,n,a,s){const r=(0,l.up)("note-item");return(0,l.wg)(),(0,l.iD)("div",null,[((0,l.wg)(!0),(0,l.iD)(l.HY,null,(0,l.Ko)(t.notes,(o=>((0,l.wg)(),(0,l.j4)(r,{note:o,key:o.id,onRemove:t=>e.$emit("remove",o),onEdit:t=>e.$emit("edit",o),onMove:t=>e.$emit("move",o)},null,8,["note","onRemove","onEdit","onMove"])))),128))])}const fe={class:"d-flex border-top p-2"},he={class:"content"},be={class:"note__btns d-flex justify-content-between"};function ge(e,o,t,n,s,r){return(0,l.wg)(),(0,l.iD)("div",{class:"note border rounded p-3 m-2",style:(0,a.j5)({"background-color":t.note.color})},[(0,l._)("div",null,[(0,l._)("h5",null,[(0,l._)("strong",null,(0,a.zw)(t.note.title),1)]),(0,l._)("div",fe,[(0,l._)("p",he,(0,a.zw)(t.note.content),1)]),(0,l._)("div",be,[(0,l._)("button",{class:"btn btn-dark btn-sm",onClick:o[0]||(o[0]=o=>e.$emit("edit",t.note))}," Изменить "),(0,l._)("button",{class:"btn btn-danger btn-sm",onClick:o[1]||(o[1]=o=>e.$emit("remove",t.note))}," Удалить "),(0,l._)("button",{class:"btn btn-info btn-sm",onClick:o[2]||(o[2]=o=>e.$emit("move",t.note))}," Переместить ")])])],4)}var ve={props:{note:{type:Object,required:!0}}};const we=(0,I.Z)(ve,[["render",ge],["__scopeId","data-v-b88cab66"]]);var _e=we,ke={props:{notes:{type:Array,required:!0}},components:{NoteItem:_e}};const ye=(0,I.Z)(ke,[["render",pe]]);var Ne=ye;const Ve=e=>((0,l.dD)("data-v-6b9f83f8"),e=e(),(0,l.Cn)(),e),Fe=Ve((()=>(0,l._)("h5",null,[(0,l._)("strong",null,"Создание заметки")],-1))),Se=Ve((()=>(0,l._)("label",{for:"title",class:"form-label"},"Название",-1))),$e=Ve((()=>(0,l._)("label",{for:"content",class:"form-label"}," Описание ",-1))),Pe=Ve((()=>(0,l._)("label",{for:"color",class:"form-label"},"Цвет",-1)));function Oe(e,o,t,a,s,r){const i=(0,l.up)("my-select");return(0,l.wg)(),(0,l.iD)("form",{onSubmit:o[4]||(o[4]=(0,n.iM)((()=>{}),["prevent"])),class:"text-start rounded p-2"},[Fe,Se,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.note.title=e),type:"text",class:"form-control mb-3",id:"title"},null,512),[[n.nr,s.note.title]]),$e,(0,l.wy)((0,l._)("textarea",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.note.content=e),maxlength:"256",class:"form-control textarea mb-3",id:"content"},"\r\n    ",512),[[n.nr,s.note.content]]),Pe,(0,l.Wm)(i,{class:"form-control mb-3",id:"color",modelValue:s.note.color,"onUpdate:modelValue":o[2]||(o[2]=e=>s.note.color=e),options:s.colorOptions},null,8,["modelValue","options"]),(0,l._)("button",{onClick:o[3]||(o[3]=(...e)=>r.createNote&&r.createNote(...e)),type:"submit",class:"btn btn-outline-dark"}," Создать ")],32)}var Ee={data(){return{note:{title:"",content:"",color:"White"},colorOptions:[{value:"White",name:"White"},{value:"Blue",name:"Blue"},{value:"Orange",name:"Orange"},{value:"Yellow",name:"Yellow"},{value:"Purple",name:"Purple"},{value:"Pink",name:"Pink"},{value:"Green",name:"Green"},{value:"Lime",name:"Lime"},{value:"LightGray",name:"LightGray"}]}},methods:{createNote(){this.$emit("create",this.note),this.note={title:"",content:""}}},components:{MySelect:Z}};const Ce=(0,I.Z)(Ee,[["render",Oe],["__scopeId","data-v-6b9f83f8"]]);var xe=Ce;const ze=e=>((0,l.dD)("data-v-2cb3c127"),e=e(),(0,l.Cn)(),e),Ue=ze((()=>(0,l._)("h5",null,[(0,l._)("strong",null,"Изменение заметки")],-1))),Ae=ze((()=>(0,l._)("label",{for:"title",class:"form-label"},"Название",-1))),De=ze((()=>(0,l._)("label",{for:"content",class:"form-label"}," Описание ",-1))),Te=ze((()=>(0,l._)("label",{for:"color",class:"form-label"},"Цвет",-1)));function We(e,o,t,a,s,r){const i=(0,l.up)("my-select");return(0,l.wg)(),(0,l.iD)("form",{onSubmit:o[4]||(o[4]=(0,n.iM)((()=>{}),["prevent"])),class:"text-start rounded p-2"},[Ue,Ae,(0,l.wy)((0,l._)("input",{"onUpdate:modelValue":o[0]||(o[0]=e=>s.note.title=e),type:"text",class:"form-control mb-3",id:"title"},null,512),[[n.nr,s.note.title]]),De,(0,l.wy)((0,l._)("textarea",{"onUpdate:modelValue":o[1]||(o[1]=e=>s.note.content=e),maxlength:"256",class:"form-control textarea mb-3",id:"content"},"\r\n    ",512),[[n.nr,s.note.content]]),Te,(0,l.Wm)(i,{class:"form-control mb-3",id:"color",modelValue:s.note.color,"onUpdate:modelValue":o[2]||(o[2]=e=>s.note.color=e),options:s.colorOptions},null,8,["modelValue","options"]),(0,l._)("button",{class:"btn btn-dark",onClick:o[3]||(o[3]=(...e)=>r.editNote&&r.editNote(...e))},"Изменить")],32)}var Me={data(){return{note:{title:"",content:"",color:"White"},colorOptions:[{value:"White",name:"White"},{value:"Blue",name:"Blue"},{value:"Orange",name:"Orange"},{value:"Yellow",name:"Yellow"},{value:"Purple",name:"Purple"},{value:"Pink",name:"Pink"},{value:"Green",name:"Green"},{value:"Lime",name:"Lime"},{value:"LightGray",name:"LightGray"}]}},methods:{editNote(){this.$emit("edit",this.note),this.note={title:"",content:""}}},components:{MySelect:Z}};const Ie=(0,I.Z)(Me,[["render",We],["__scopeId","data-v-2cb3c127"]]);var Re=Ie;const Ze=(0,l._)("h5",null,[(0,l._)("strong",null,"Перемещение заметки")],-1),Le=(0,l._)("label",{for:"folder",class:"form-label"},"Папка",-1);function Be(e,o,t,a,s,r){const i=(0,l.up)("my-select");return(0,l.wg)(),(0,l.iD)("form",{onSubmit:o[2]||(o[2]=(0,n.iM)((()=>{}),["prevent"])),class:"text-start rounded p-2"},[Ze,Le,(0,l.Wm)(i,{class:"form-control mb-3",id:"folder",modelValue:s.note.folder,"onUpdate:modelValue":o[0]||(o[0]=e=>s.note.folder=e),options:t.folderOptions},null,8,["modelValue","options"]),(0,l._)("button",{class:"btn btn-dark",onClick:o[1]||(o[1]=(...e)=>r.moveNote&&r.moveNote(...e))},"Переместить")],32)}var je={props:{folderOptions:{type:Array,default:()=>[]}},data(){return{note:{folder:"",options:""}}},methods:{moveNote(){this.$emit("move",this.note)}},components:{MySelect:Z}};const Ge=(0,I.Z)(je,[["render",Be]]);var qe=Ge,Ye={setup(){const e=(0,le.qj)({formAutoriz:{name:"",password:""},formReg:{name:"",email:"",password:"",confirmPassword:""}}),o=(0,l.Fl)((()=>({formAutoriz:{name:{required:ne.C1},password:{required:ne.C1}},formReg:{name:{required:ne.C1,maxLength:(0,ne.BS)(32)},email:{required:ne.C1,email:ne.Do},password:{required:ne.C1,minLength:(0,ne.Ei)(6),maxLength:(0,ne.BS)(32)},confirmPassword:{required:ne.C1,sameAs:(0,ne.sH)(e.formReg.password)}}}))),t=(0,te.Xw)(o,e);return{state:e,v$:t}},data(){return{step:1,userInfo:{},folders:[],folderOptions:[],notes:[],dialogVisible:!1,dialogEditVisible:!1,dialogNoteVisible:!1,dialogEditNoteVisible:!1,dialogMoveNoteVisible:!1,selectedFolderEditId:"",selectedFolderId:"",selectedNoteEditId:""}},mounted(){localStorage.accessToken&&(this.fetchUserInfo(),this.step=0,this.fetchFolders(),ae.ZP.post("https://test-api.misaka.net.ru/api/Account/login",{username:localStorage.userName,password:localStorage.userPassword}).then((function(e){localStorage.accessToken=e.data.accessToken,localStorage.refreshToken=e.data.refreshToken})).catch((()=>{console.log("Пользователь не найден")})),setInterval((()=>{ae.ZP.post("https://test-api.misaka.net.ru/api/Account/refresh-token",{refreshToken:localStorage.refreshToken}).then((function(e){localStorage.accessToken=e.data.accessToken,localStorage.refreshToken=e.data.refreshToken})).catch((()=>{console.log("Токен не загрузился")}))}),9e5))},methods:{register(){1===this.step&&this.step++},autorization(){2===this.step&&this.step--},autorizationUser(){if(this.v$.$validate(),this.v$.formAutoriz.$error)console.log("Авторизация прошла неудачно");else{const e={name:this.state.formAutoriz.name,password:this.state.formAutoriz.password};ae.ZP.post("https://test-api.misaka.net.ru/api/Account/login",{username:this.state.formAutoriz.name,password:this.state.formAutoriz.password}).then((function(o){localStorage.accessToken=o.data.accessToken,localStorage.refreshToken=o.data.refreshToken,localStorage.userName=e.name,localStorage.userPassword=e.password,location.reload(),this.step=0})).catch((()=>{console.log("Пользователь не найден")}))}},registrationUser(){if(this.v$.$validate(),this.v$.formReg.$error)console.log("Регистрация прошла неудачно");else{const e={name:this.state.formReg.name,password:this.state.formReg.password};ae.ZP.post("https://test-api.misaka.net.ru/api/Account/register",{username:this.state.formReg.name,email:this.state.formReg.email,password:this.state.formReg.password}).then((function(o){localStorage.accessToken=o.data.accessToken,localStorage.refreshToken=o.data.refreshToken,localStorage.userName=e.name,localStorage.userPassword=e.password,location.reload(),this.step=0})).catch((()=>{console.log("Пользователь зарегистрирован")}))}},async fetchUserInfo(){try{const e=await ae.ZP.get("https://test-api.misaka.net.ru/api/Account/user",{headers:{Authorization:`Bearer ${localStorage.accessToken}`}});this.userInfo.userName=e.data.username,this.userInfo.userEmail=e.data.email}catch(e){console.log("Невозможно загрузить информацию о пользователе")}},createFolder(e){ae.ZP.post("https://test-api.misaka.net.ru/api/Folders",{name:e.name,color:e.color},{headers:{Authorization:`Bearer ${localStorage.accessToken}`}}).then((()=>{this.fetchFolders()})).catch((()=>{console.log("Ошибка на добавление папки")})),this.dialogVisible=!1},removeFolder(e){ae.ZP["delete"](`https://test-api.misaka.net.ru/api/Folders/${e.id}`,{headers:{Authorization:`Bearer ${localStorage.accessToken}`}}).then((()=>{this.fetchFolders()})).catch((()=>{console.log("Папка не удалена")}))},editFolder(e){this.dialogEditVisible=!0,this.selectedFolderEditId=e.id},editFolderForm(e){ae.ZP.put(`https://test-api.misaka.net.ru/api/Folders/${this.selectedFolderEditId}`,{name:e.name,color:e.color},{headers:{Authorization:`Bearer ${localStorage.accessToken}`}}).then((()=>{this.fetchFolders(),this.dialogEditVisible=!1})).catch((()=>{console.log("Папка не изменилась")}))},createNote(e){ae.ZP.post(`https://test-api.misaka.net.ru/api/Folders/${this.selectedFolderId}/notes`,{title:e.title,content:e.content,color:e.color},{headers:{Authorization:`Bearer ${localStorage.accessToken}`}}).then((()=>{this.fetchNotes(),this.fetchFolders(),this.dialogNoteVisible=!1})).catch((()=>{console.log("Ошибка на добавление заметки")})),this.dialogVisible=!1},removeNote(e){ae.ZP["delete"](`https://test-api.misaka.net.ru/api/Notes/${e.id}`,{headers:{Authorization:`Bearer ${localStorage.accessToken}`}}).then((()=>{this.fetchNotes(),this.fetchFolders()})).catch((()=>{console.log("Заметка не удалена")}))},editNote(e){this.dialogEditNoteVisible=!0,this.selectedNoteEditId=e.id},editNoteForm(e){ae.ZP.put(`https://test-api.misaka.net.ru/api/Notes/${this.selectedNoteEditId}`,{title:e.title,content:e.content,color:e.color},{headers:{Authorization:`Bearer ${localStorage.accessToken}`}}).then((()=>{this.fetchNotes(),this.dialogEditNoteVisible=!1})).catch((()=>{console.log("Заметка не изменилась")}))},moveNote(){this.dialogMoveNoteVisible=!0},moveNoteForm(){console.log("Изменение формы"),this.dialogMoveNoteVisible=!1},showNotes(e){this.selectedFolderId=e.id,this.fetchNotes()},showDialog(){this.dialogVisible=!0},showNoteDialog(){this.dialogNoteVisible=!0},async fetchFolders(){try{const e=await ae.ZP.get("https://test-api.misaka.net.ru/api/Folders",{headers:{Authorization:`Bearer ${localStorage.accessToken}`}});this.folders=e.data;for(const o of this.folders)this.folderOptions.push({value:o.name,name:o.name})}catch(e){console.log("Ошибка получения папок")}},async fetchNotes(){try{const e=await ae.ZP.get(`https://test-api.misaka.net.ru/api/Folders/${this.selectedFolderId}/notes`,{headers:{Authorization:`Bearer ${localStorage.accessToken}`}});this.notes=e.data}catch(e){console.log("Ошибка получения заметок")}}},components:{FolderForm:j,FolderList:oe,FolderFormEdit:ue,NotesList:Ne,NoteFormCreate:xe,NoteFormEdit:Re,NoteFormMove:qe}};const He=(0,I.Z)(Ye,[["render",C]]);var Ke=He;function Xe(e,o,t,a,s,r){return t.show?((0,l.wg)(),(0,l.iD)("div",{key:0,class:"dialog",onClick:o[1]||(o[1]=(0,n.iM)(((...e)=>r.hideDialog&&r.hideDialog(...e)),["stop"]))},[(0,l._)("div",{onClick:o[0]||(o[0]=(0,n.iM)((()=>{}),["stop"])),class:"dialog__content"},[(0,l.WI)(e.$slots,"default",{},void 0,!0)])])):(0,l.kq)("",!0)}var Je={name:"my-dialog",props:{show:{type:Boolean,default:!1}},methods:{hideDialog(){this.$emit("update:show",!1)}}};const Qe=(0,I.Z)(Je,[["render",Xe],["__scopeId","data-v-88e56fb2"]]);var eo=Qe,oo=[eo];const to=(0,n.ri)(Ke);oo.forEach((e=>{to.component(e.name,e)})),to.mount("#app")}},o={};function t(n){var l=o[n];if(void 0!==l)return l.exports;var a=o[n]={exports:{}};return e[n](a,a.exports,t),a.exports}t.m=e,function(){var e=[];t.O=function(o,n,l,a){if(!n){var s=1/0;for(d=0;d<e.length;d++){n=e[d][0],l=e[d][1],a=e[d][2];for(var r=!0,i=0;i<n.length;i++)(!1&a||s>=a)&&Object.keys(t.O).every((function(e){return t.O[e](n[i])}))?n.splice(i--,1):(r=!1,a<s&&(s=a));if(r){e.splice(d--,1);var c=l();void 0!==c&&(o=c)}}return o}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,l,a]}}(),function(){t.n=function(e){var o=e&&e.__esModule?function(){return e["default"]}:function(){return e};return t.d(o,{a:o}),o}}(),function(){t.d=function(e,o){for(var n in o)t.o(o,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:o[n]})}}(),function(){t.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){t.o=function(e,o){return Object.prototype.hasOwnProperty.call(e,o)}}(),function(){var e={143:0};t.O.j=function(o){return 0===e[o]};var o=function(o,n){var l,a,s=n[0],r=n[1],i=n[2],c=0;if(s.some((function(o){return 0!==e[o]}))){for(l in r)t.o(r,l)&&(t.m[l]=r[l]);if(i)var d=i(t)}for(o&&o(n);c<s.length;c++)a=s[c],t.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return t.O(d)},n=self["webpackChunkwebtodo"]=self["webpackChunkwebtodo"]||[];n.forEach(o.bind(null,0)),n.push=o.bind(null,n.push.bind(n))}();var n=t.O(void 0,[998],(function(){return t(368)}));n=t.O(n)})();
//# sourceMappingURL=app.e2aea528.js.map